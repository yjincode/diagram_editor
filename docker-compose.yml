version: '3.8'

services:
  diagram-editor:
    build: .
    container_name: diagram-editor
    ports:
      - "41173:41173"  # Frontend
      - "41001:41001"  # REST API
      - "41002:41002"  # WebSocket
    volumes:
      # Persist session cache
      - ./cache:/app/cache
      # For development: mount source for hot reload
      - ./src:/app/src
      - ./index.html:/app/index.html
      - ./mcp-server:/app/mcp-server
    stdin_open: true  # For MCP stdio
    tty: true
    restart: unless-stopped
